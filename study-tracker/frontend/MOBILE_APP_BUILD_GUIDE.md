# TaskTracker Mobile App - Build Guide

## Overview
This guide explains how to build the TaskTracker Android APK using Capacitor.

## Prerequisites
- Node.js and npm installed
- Android Studio installed
- Java Development Kit (JDK) 11 or higher

## Project Structure
```
frontend/
├── android/                 # Android project (generated by Capacitor)
│   ├── app/
│   │   └── src/main/
│   │       ├── AndroidManifest.xml
│   │       └── res/        # App icons and resources
│   └── build.gradle
├── src/
│   └── utils/
│       └── capacitor.js    # Native feature utilities
├── capacitor.config.json   # Capacitor configuration
└── package.json
```

## Available Native Features
The app includes these Capacitor plugins:
- **Push Notifications** - For sending reminders
- **Camera** - For capturing photos
- **Filesystem** - For saving/reading files
- **Splash Screen** - App launch screen
- **Status Bar** - Native status bar customization

## Build Commands

### 1. Build the Web App
```bash
cd frontend
npm run build
```

### 2. Sync with Android
```bash
npx cap sync android
```

### 3. Open in Android Studio
```bash
npx cap open android
```

### 4. Build APK in Android Studio
1. Wait for Gradle sync to complete
2. Go to **Build** → **Build Bundle(s) / APK(s)** → **Build APK(s)**
3. The APK will be in: `android/app/build/outputs/apk/debug/app-debug.apk`

### For Release APK (Signed)
1. Go to **Build** → **Generate Signed Bundle / APK**
2. Select **APK**
3. Create or use existing keystore
4. Select **release** build variant
5. APK will be in: `android/app/build/outputs/apk/release/app-release.apk`

## Using Native Features in Code

### Initialize on App Start
```javascript
import { initCapacitor } from './utils/capacitor';

useEffect(() => {
  initCapacitor();
}, []);
```

### Take a Photo
```javascript
import { takePhoto } from './utils/capacitor';

const handleTakePhoto = async () => {
  const result = await takePhoto();
  if (result.success) {
    // Use result.data (base64 image)
  }
};
```

### Push Notification Token
```javascript
import { getPushToken } from './utils/capacitor';

const token = getPushToken();
// Send to your backend for push notifications
```

### Write File
```javascript
import { writeFile } from './utils/capacitor';

const saveData = async (data) => {
  await writeFile('mydata.json', JSON.stringify(data));
};
```

## Troubleshooting

### Gradle Sync Failed
- Ensure Android Studio has the correct SDK installed
- Check `android/variables.gradle` for SDK versions

### Build Errors
- Run `npx cap sync android` again after changes
- Clean rebuild: In Android Studio, **Build** → **Clean Project**

### Push Notifications Not Working
- Ensure Firebase is configured (for production)
- Check that notification permissions are granted

## App Configuration
Edit `capacitor.config.json` to change:
- `appId`: Package identifier (com.tasktracker.app)
- `appName`: App display name
- `webDir`: Build output directory
- Plugin-specific settings

## Quick Reference Commands
```bash
# Full rebuild and sync
npm run build && npx cap sync android

# Open Android Studio
npx cap open android

# Run on connected device
npx cap run android
```
